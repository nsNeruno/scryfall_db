// Sample Response
// {
//    "object":"card",
//    "id":"86bf43b1-8d4e-4759-bb2d-0b2e03ba7012",
//    "oracle_id":"0004ebd0-dfd6-4276-b4a6-de0003e94237",
//    "multiverse_ids":[
//       15862
//    ],
//    "mtgo_id":15870,
//    "mtgo_foil_id":15871,
//    "tcgplayer_id":3094,
//    "cardmarket_id":3081,
//    "name":"Static Orb",
//    "lang":"en",
//    "released_at":"2001-04-11",
//    "uri":"https://api.scryfall.com/cards/86bf43b1-8d4e-4759-bb2d-0b2e03ba7012",
//    "scryfall_uri":"https://scryfall.com/card/7ed/319/static-orb?utm_source=api",
//    "layout":"normal",
//    "highres_image":true,
//    "image_status":"highres_scan",
//    "image_uris":{
//       "small":"https://cards.scryfall.io/small/front/8/6/86bf43b1-8d4e-4759-bb2d-0b2e03ba7012.jpg?1562242171",
//       "normal":"https://cards.scryfall.io/normal/front/8/6/86bf43b1-8d4e-4759-bb2d-0b2e03ba7012.jpg?1562242171",
//       "large":"https://cards.scryfall.io/large/front/8/6/86bf43b1-8d4e-4759-bb2d-0b2e03ba7012.jpg?1562242171",
//       "png":"https://cards.scryfall.io/png/front/8/6/86bf43b1-8d4e-4759-bb2d-0b2e03ba7012.png?1562242171",
//       "art_crop":"https://cards.scryfall.io/art_crop/front/8/6/86bf43b1-8d4e-4759-bb2d-0b2e03ba7012.jpg?1562242171",
//       "border_crop":"https://cards.scryfall.io/border_crop/front/8/6/86bf43b1-8d4e-4759-bb2d-0b2e03ba7012.jpg?1562242171"
//    },
//    "mana_cost":"{3}",
//    "cmc":3.0,
//    "type_line":"Artifact",
//    "oracle_text":"As long as Static Orb is untapped, players can't untap more than two permanents during their untap steps.",
//    "colors":[
      
//    ],
//    "color_identity":[
      
//    ],
//    "keywords":[
      
//    ],
//    "legalities":{
//       "standard":"not_legal",
//       "future":"not_legal",
//       "historic":"not_legal",
//       "gladiator":"not_legal",
//       "pioneer":"not_legal",
//       "explorer":"not_legal",
//       "modern":"not_legal",
//       "legacy":"legal",
//       "pauper":"not_legal",
//       "vintage":"legal",
//       "penny":"not_legal",
//       "commander":"legal",
//       "oathbreaker":"legal",
//       "brawl":"not_legal",
//       "historicbrawl":"not_legal",
//       "alchemy":"not_legal",
//       "paupercommander":"not_legal",
//       "duel":"legal",
//       "oldschool":"not_legal",
//       "premodern":"legal",
//       "predh":"legal"
//    },
//    "games":[
//       "paper",
//       "mtgo"
//    ],
//    "reserved":false,
//    "foil":false,
//    "nonfoil":true,
//    "finishes":[
//       "nonfoil"
//    ],
//    "oversized":false,
//    "promo":false,
//    "reprint":true,
//    "variation":false,
//    "set_id":"230f38aa-9511-4db8-a3aa-aeddbc3f7bb9",
//    "set":"7ed",
//    "set_name":"Seventh Edition",
//    "set_type":"core",
//    "set_uri":"https://api.scryfall.com/sets/230f38aa-9511-4db8-a3aa-aeddbc3f7bb9",
//    "set_search_uri":"https://api.scryfall.com/cards/search?order=set&q=e%3A7ed&unique=prints",
//    "scryfall_set_uri":"https://scryfall.com/sets/7ed?utm_source=api",
//    "rulings_uri":"https://api.scryfall.com/cards/86bf43b1-8d4e-4759-bb2d-0b2e03ba7012/rulings",
//    "prints_search_uri":"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A0004ebd0-dfd6-4276-b4a6-de0003e94237&unique=prints",
//    "collector_number":"319",
//    "digital":false,
//    "rarity":"rare",
//    "flavor_text":"The warriors fought against the paralyzing waves until even their thoughts froze in place.",
//    "card_back_id":"0aeebaf5-8c7d-4636-9e82-8c27447861f7",
//    "artist":"Terese Nielsen",
//    "artist_ids":[
//       "eb55171c-2342-45f4-a503-2d5a75baf752"
//    ],
//    "illustration_id":"6f8b3b2c-252f-4f95-b621-712c82be38b5",
//    "border_color":"white",
//    "frame":"1997",
//    "full_art":false,
//    "textless":false,
//    "booster":true,
//    "story_spotlight":false,
//    "edhrec_rank":3394,
//    "prices":{
//       "usd":"18.45",
//       "usd_foil":null,
//       "usd_etched":null,
//       "eur":"3.99",
//       "eur_foil":null,
//       "tix":"0.15"
//    },
//    "related_uris":{
//       "gatherer":"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=15862",
//       "tcgplayer_infinite_articles":"https://infinite.tcgplayer.com/search?contentMode=article&game=magic&partner=scryfall&q=Static+Orb&utm_campaign=affiliate&utm_medium=api&utm_source=scryfall",
//       "tcgplayer_infinite_decks":"https://infinite.tcgplayer.com/search?contentMode=deck&game=magic&partner=scryfall&q=Static+Orb&utm_campaign=affiliate&utm_medium=api&utm_source=scryfall",
//       "edhrec":"https://edhrec.com/route/?cc=Static+Orb"
//    },
//    "purchase_uris":{
//       "tcgplayer":"https://www.tcgplayer.com/product/3094?page=1&utm_campaign=affiliate&utm_medium=api&utm_source=scryfall",
//       "cardmarket":"https://www.cardmarket.com/en/Magic/Products/Search?referrer=scryfall&searchString=Static+Orb&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",
//       "cardhoarder":"https://www.cardhoarder.com/cards/15870?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"
//    }
// }
import 'package:scryfall_db/models/enums.dart';
import 'package:scryfall_db/utils.dart';

class Card implements _ICoreCard, _IGameplayFields, _IPrintFields {

  const Card.fromMap(Map<String, dynamic> data,): _internal = data;

  // BEGIN: _ICoreCard  
  @override
  int? get arenaId => _internal['arena_id'];
  
  @override
  String get id => _internal['id'];

  @override
  String get lang => _internal['lang'];

  @override
  int? get magicOnlineId => _internal['mtgo_id'];

  @override
  int? get magicOnlineFoilId => _internal['mtgo_foil_id'];
  
  @override
  List<int>? get multiverseIds => asList(_internal['multiverse_ids'],);
  
  @override
  int? get tcgPlayerId => _internal['tcgplayer_id'];

  @override
  int? get tcgPlayerEtchedId => _internal['tcgplayer_etched_id'];
  
  @override
  int? get cardMarketId => _internal['cardmarket_id'];
  
  @override
  String get layout => _internal['layout'];  
  
  @override
  String? get oracleId => _internal['oracle_id'];

  @override
  Uri? get printsSearchUri => Uri.tryParse('${_internal['prints_search_uri']}',);
  
  @override
  Uri? get rulingsUri => Uri.tryParse('${_internal['rulings_uri']}',);
  
  @override
  Uri? get scryfallUri => Uri.tryParse('${_internal['scryfall_uri']}',);

  @override
  Uri? get uri => Uri.tryParse('${_internal['uri']}',);
  // END: _ICoreCard

  // BEGIN: _IGameplayFields
  @override
  List<RelatedCard>? get allParts => asList<Map<String, dynamic>>(
    _internal['all_parts'],
  )?.map((e) => RelatedCard._fromMap(e,),).toList();

  @override
  String get name => _internal['name'];
  // END: _IGameplayFields

  // BEGIN: _IPrintFields
  @override
  Prices? get prices => asMapAndCast(_internal['prices'], (map) => Prices._fromMap(map,),);

  @override
  PurchaseUris? get purchaseUris => asMapAndCast(_internal['purchase_uris'], (map) => PurchaseUris._fromMap(map,),);
  // END: _IPrintFields

  final Map<String, dynamic> _internal;
}

class RelatedCard {

  const RelatedCard._fromMap(Map<String, dynamic> data,): _internal = data;

  String get id => _internal['id'];

  CardRole? get component => parseCardRole(_internal['component'],);

  String get name => _internal['name'];

  String? get typeLine => _internal['type_line'];

  Uri? get uri => Uri.tryParse('${_internal['uri']}',);

  final Map<String, dynamic> _internal;
}

abstract class _ICoreCard {

  int? get arenaId;
  String get id;
  String get lang;
  int? get magicOnlineId;
  int? get magicOnlineFoilId;
  List<int>? get multiverseIds;
  int? get tcgPlayerId;
  int? get tcgPlayerEtchedId;
  int? get cardMarketId;
  String get layout;
  String? get oracleId;
  Uri? get printsSearchUri;
  Uri? get rulingsUri;
  Uri? get scryfallUri;
  Uri? get uri;
}

abstract class _IGameplayFields {

  List<RelatedCard>? get allParts;

  String get name;
}

class Prices {

  const Prices._fromMap(Map<String, dynamic> data,): _internal = data;

  String? get _usd => _internal['usd'];
  num? get usd => num.tryParse('$_usd',);

  String? get _usdFoil => _internal['usd_foil'];
  num? get usdFoil => num.tryParse('$_usdFoil',);

  String? get _usdEtched => _internal['usd_etched'];
  num? get usdEtched => num.tryParse('$_usdEtched',);

  String? get _eur => _internal['eur'];
  num? get eur => num.tryParse('$_eur',);

  String? get _eurFoil => _internal['eur_foil'];
  num? get eurFoil => num.tryParse('$_eurFoil',);

  String? get _tix => _internal['tix'];
  num? get tix => num.tryParse('$_tix',);

  final Map<String, dynamic> _internal;
}

class PurchaseUris {

  PurchaseUris._fromMap(Map<String, dynamic> data,): _internal = data;

  Uri? get tcgPlayer => Uri.tryParse('${_internal['tcgplayer']}',);
  Uri? get cardMarket => Uri.tryParse('${_internal['cardmarket']}',);
  Uri? get cardHoarder => Uri.tryParse('${_internal['cardhoarder']}',);

  final Map<String, dynamic> _internal;
}

abstract class _IPrintFields {

  Prices? get prices;
  PurchaseUris? get purchaseUris;
}